import{C as m,B as P,D as R,P as j}from"./chart.js.515f6714.js";import{d as E,I as B,l as I,w as p,o as S,t as q,J as u,h as O,_ as v}from"./@vue.7f1d01af.js";var h;(function(e){e.ChartRendered="chart:rendered",e.ChartUpdated="chart:updated",e.ChartDestroyed="chart:destroyed",e.LabelsUpdated="labels:updated"})(h||(h={}));function y(e,n,l,t){e(n,l),t!==void 0&&t.emit(h.ChartRendered)}function A(e,n){e.update(),n!==void 0&&n.emit(h.ChartUpdated)}function b(e,n){e.destroy(),n!==void 0&&n.emit(h.ChartDestroyed)}function H(e,n){const l={labels:typeof e.labels>"u"?[]:[...e.labels],datasets:[]};return w(l,{...e},n),l}function w(e,n,l){const t=[];e.datasets=n.datasets.map(a=>{const s=e.datasets.find(o=>o[l]===a[l]);return!s||!a.data||t.includes(s)?{...a}:(t.push(s),Object.assign(s,a),s)})}function K(e,n,l){e.data.labels=n,l!==void 0&&l.emit(h.LabelsUpdated)}function N(e,n){e.options={...n}}function _(e,n){const l=e.datasets.map(a=>a.label),t=n.datasets.map(a=>a.label);return n.datasets.length===e.datasets.length&&l.every((a,s)=>a===t[s])}const k="Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components",J="Update ERROR: chart instance not found",C=(e,n,l)=>E({props:{chartData:{type:Object,required:!0},chartOptions:{type:Object,default:()=>{}},datasetIdKey:{type:String,default:"label"},chartId:{type:String,default:e},width:{type:Number,default:400},height:{type:Number,default:400},cssClasses:{type:String,default:""},styles:{type:Object,default:()=>{}},plugins:{type:Array,default:()=>[]}},setup(t,a){m.register(l);const s=B(null),o=I(null);function g(r,d){if(s.value!==null&&b(u(s.value),a),o.value===null)throw new Error(k);{const i=H(r,t.datasetIdKey),f=o.value.getContext("2d");f!==null&&(s.value=new m(f,{type:n,data:v(r)?new Proxy(i,{}):i,options:d,plugins:t.plugins}))}}function L(r,d){const i=v(r)?u(r):{...r},f=v(d)?u(d):{...d};if(Object.keys(f).length>0){const c=u(s.value);_(i,f)&&c!==null?(w(c==null?void 0:c.data,i,t.datasetIdKey),i.labels!==void 0&&K(c,i.labels,a),D()):(c!==null&&b(c,a),y(g,t.chartData,t.chartOptions,a))}else s.value!==null&&b(u(s.value),a),y(g,t.chartData,t.chartOptions,a)}function U(r){const d=u(s.value);d!==null?(N(d,r),D()):y(g,t.chartData,t.chartOptions,a)}function D(){const r=u(s.value);r!==null?A(r,a):console.error(J)}return p(()=>t.chartData,(r,d)=>L(r,d),{deep:!0}),p(()=>t.chartOptions,r=>U(r),{deep:!0}),S(()=>{"datasets"in t.chartData&&t.chartData.datasets.length>0&&y(g,t.chartData,t.chartOptions,a)}),q(()=>{s.value!==null&&b(u(s.value),a)}),a.expose({chart:s,updateChart:D}),()=>O("div",{style:t.styles,class:t.cssClasses},[O("canvas",{id:t.chartId,width:t.width,height:t.height,ref:o})])}}),G=C("bar-chart","bar",P),Q=C("doughnut-chart","doughnut",R),T=C("pie-chart","pie",j);export{G as B,Q as D,T as P};
